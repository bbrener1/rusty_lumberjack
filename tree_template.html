<head>
  <style>
    #treeContainer {
      display:inline;
      position:absolute;
      top:0px;
      left:0px;
      width:3000px;
      height:2000px;
    }
    .node_container {
      z-index:1;
      background: white;
      opacity: 1;
      border: 1px solid gray;
    }
    .connection {
      stroke:black;
      z-index:-1;
    }
    .sister_map {
      width:100%;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script>
    $(document).ready(
      function() {
        insertNodes();
        insertConnections();
        decorateNodes();
      });

    function insertNodes() {
      console.log(treeCoordinates);
      for (let [index,node] of treeCoordinates) {
        let [left,bottom,width,height] = node.map(function (x) {return x*100});
        console.log(`Node : ${[left,bottom,width,height]}`);
        let style_spec =
          `
            position:absolute;
            bottom:${bottom}%;
            left:${left}%;
            width:${width}%;
            // height:${height}%;
          `
        let node_html = `<div id="${index}" class="node_container" style="${style_spec}">${index}</div>`;
        $("#treeContainer").append(node_html);
      }
    }

    function decorateNodes() {
      $(".node_container").each(function (index,node) {
        node.innerHTML = `<img class="sister_map" src="./${index}/sister_map.png"/>`
      });
    }

    function insertConnections() {
      console.log(connections);
      let connection_string = "";
      for (c of connections) {
        let [x,y,cx,cy,t] = c.map(function (x){return 100*x});
        let coordinate_spec =
        `
        x1="${x}%"
        y1="${100-y}%"
        x2="${cx}%"
        y2="${100-cy}%"
        `;
        // let line_html = `<line class="connection" ${coordinate_spec}></line>`;
        let style_spec =
        `
        stroke-width:${t/10000}px;
        `;
        let line_html = `<line class="connection" ${coordinate_spec} style="${style_spec}"></line>`;
        connection_string = connection_string + line_html;
        // $("#lineContainer").append(line_html);

      }
      let svg_string = `<svg id="lineContainer" height="100%" width="100%">${connection_string}</svg>`;
      $("#treeContainer").append(svg_string);
    }


  </script>
</head>
<body>
  <script>
    let summaries = {};
  </script>
  <div id="treeContainer" width="3000px" height="2000px">
  </div>
</body>
